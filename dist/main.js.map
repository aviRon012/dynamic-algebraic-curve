{
  "version": 3,
  "sources": ["..\\src\\math\\Vector.ts", "..\\src\\engine\\Params.ts", "..\\src\\engine\\Particle.ts", "..\\src\\engine\\SolverGPU.ts", "..\\src\\engine\\Renderer.ts", "..\\src\\engine\\Simulation.ts", "..\\src\\main.ts"],
  "sourcesContent": [
    "/**\n * A lightweight 2D Vector class for physics calculations.\n * Supports chainable operations for efficiency.\n */\nexport class Vector {\n    x: number;\n    y: number;\n\n    constructor(x: number, y: number) { this.x = x; this.y = y; }\n\n    set(x: number, y: number): Vector { this.x = x; this.y = y; return this; }\n\n    setVec(v: Vector): Vector { this.x = v.x; this.y = v.y; return this; }\n\n    add(v: Vector): Vector { this.x += v.x; this.y += v.y; return this; }\n\n    sub(v: Vector): Vector { this.x -= v.x; this.y -= v.y; return this; }\n\n    mult(n: number): Vector { this.x *= n; this.y *= n; return this; }\n\n    div(n: number): Vector { if (n !== 0) { this.x /= n; this.y /= n; } return this; }\n\n    magSq(): number { return this.x * this.x + this.y * this.y; }\n\n    mag(): number { return Math.sqrt(this.x * this.x + this.y * this.y); }\n\n    normalize(): Vector { let m = this.mag(); if (m > 0) this.div(m); return this; }\n\n    limit(max: number): Vector { \n        let mSq = this.magSq();\n        if (mSq > max * max) { \n            this.div(Math.sqrt(mSq)); \n            this.mult(max); \n        } \n        return this; \n    }\n\n    static dist(v1: Vector, v2: Vector): number { let dx = v1.x - v2.x; let dy = v1.y - v2.y; return Math.sqrt(dx * dx + dy * dy); }\n\n    static distSq(v1: Vector, v2: Vector): number { let dx = v1.x - v2.x; let dy = v1.y - v2.y; return dx * dx + dy * dy; }\n\n    static sub(v1: Vector, v2: Vector): Vector { return new Vector(v1.x - v2.x, v1.y - v2.y); }\n}",
    "// --- SCALING FACTORS ---\n// Controls how the physics scales with screen size and particle count\nexport const K_DIST = 0.22; // Separation radius scale (0.15-0.3 recommended)\nexport const K_SPEED = 0.0055; // Max speed scale\nexport const K_FORCE = 0.06; // Steering force scale\nexport const VIEW_SCALE_FACTOR = 2.5; // Viewport zoom (higher = more zoomed out)\n\n// --- VISUALS ---\nexport const POINT_RADIUS = 6;\nexport const COLOR_POS = [30/255, 41/255, 59/255, 1.0]; // Dark Blue (Positive)\nexport const COLOR_NEG = [15/255, 23/255, 42/255, 1.0]; // Darker Blue (Negative)\nexport const COLOR_LINE = [45/255, 212/255, 191/255, 1.0]; // Cyan (The Curve)\nexport const POINT_COLOR = '#fbbf24'; // Amber\n\n// --- PHYSICS BEHAVIORS (Reynolds Steering) ---\nexport const WANDER_STRENGTH = 0.1;\nexport const WANDER_RANGE = 0.3; // Randomness of wander\nexport const WANDER_RADIUS = 25;\nexport const WANDER_DISTANCE = 80;\nexport const EDGE_MARGIN = 50; // Distance from edge to start turning back\n\n// --- FORCE WEIGHTS ---\nexport const WEIGHT_SEPARATION = 1.5; // Multiplier for separation force\nexport const WEIGHT_WANDER = 1.0;     // Multiplier for wander force\nexport const WEIGHT_BOUNDARIES = 2.0; // Multiplier for boundary containment\n\nexport interface SimulationParams {\n    minDistance: number;\n    maxSpeed: number;\n    maxForce: number;\n    scale: number;\n    isPaused: boolean;\n    viewMode: number;\n}\n\n// --- INITIAL STATE FACTORY ---\nexport function createDefaultParams(): SimulationParams {\n    return {\n        minDistance: 100,\n        maxSpeed: 2.5,\n        maxForce: 0.15,\n        scale: 1,\n        isPaused: false,\n        viewMode: 0 // 0: Both, 1: Curve Only, 2: Particles Only\n    };\n}",
    "import { Vector } from '../math/Vector.ts';\nimport { \n    POINT_RADIUS, POINT_COLOR,\n    WANDER_RANGE, WANDER_RADIUS, WANDER_DISTANCE,\n    EDGE_MARGIN,\n    WEIGHT_SEPARATION, WEIGHT_WANDER, WEIGHT_BOUNDARIES,\n    type SimulationParams\n} from './Params.ts';\n\n/**\n * Represents a single autonomous agent in the simulation.\n * Implements Reynolds-style steering behaviors (Separation, Wander, Bounds).\n */\nexport class Particle {\n    pos: Vector;\n    vel: Vector;\n    acc: Vector;\n    wanderTheta: number;\n    \n    // Reusable vectors\n    _steer: Vector;\n    _diff: Vector;\n    _circleCenter: Vector;\n    _displacement: Vector;\n\n    constructor(x: number, y: number) {\n        this.pos = new Vector(x, y);\n        this.vel = new Vector(Math.random() * 2 - 1, Math.random() * 2 - 1);\n        this.acc = new Vector(0, 0);\n        this.wanderTheta = Math.random() * Math.PI * 2;\n        \n        this._steer = new Vector(0, 0);\n        this._diff = new Vector(0, 0);\n        this._circleCenter = new Vector(0, 0);\n        this._displacement = new Vector(0, 0);\n    }\n\n    applyForce(force: Vector) { this.acc.add(force); }\n\n    separate(particles: Particle[], params: SimulationParams): Vector {\n        let desiredseparationSq = params.minDistance * params.minDistance;\n        this._steer.set(0, 0);\n        let count = 0;\n        for (let other of particles) {\n            let dSq = Vector.distSq(this.pos, other.pos);\n            if ((other !== this) && (dSq < desiredseparationSq) && (dSq > 0)) {\n                let d = Math.sqrt(dSq);\n                this._diff.setVec(this.pos).sub(other.pos);\n                this._diff.normalize();\n                this._diff.div(d);\n                this._steer.add(this._diff);\n                count++;\n            }\n        }\n        if (count > 0) {\n            this._steer.div(count);\n            this._steer.normalize();\n            this._steer.mult(params.maxSpeed);\n            this._steer.sub(this.vel);\n            this._steer.limit(params.maxForce * WEIGHT_SEPARATION); \n        }\n        return this._steer;\n    }\n\n    wander(params: SimulationParams): Vector {\n        this.wanderTheta += (Math.random() * 2 - 1) * WANDER_RANGE;\n        \n        this._circleCenter.setVec(this.vel);\n        this._circleCenter.normalize();\n        this._circleCenter.mult(WANDER_DISTANCE);\n        \n        this._displacement.set(0, -1);\n        this._displacement.mult(WANDER_RADIUS);\n        \n        let h = this.wanderTheta;\n        let x = this._displacement.x;\n        let y = this._displacement.y;\n        // Rotate displacement\n        this._displacement.x = x * Math.cos(h) - y * Math.sin(h);\n        this._displacement.y = x * Math.sin(h) + y * Math.cos(h);\n        \n        let target = this._circleCenter.add(this._displacement);\n        target.limit(params.maxForce);\n        return target;\n    }\n\n    edges(width: number, height: number, params: SimulationParams): Vector {\n        let steer = this._diff; // Reuse vector\n        steer.set(0, 0);\n        \n        if (this.pos.x < EDGE_MARGIN) steer.x = params.maxSpeed;\n        if (this.pos.x > width - EDGE_MARGIN) steer.x = -params.maxSpeed;\n        if (this.pos.y < EDGE_MARGIN) steer.y = params.maxSpeed;\n        if (this.pos.y > height - EDGE_MARGIN) steer.y = -params.maxSpeed;\n        \n        if (steer.mag() > 0) {\n            steer.normalize();\n            steer.mult(params.maxSpeed);\n            steer.sub(this.vel);\n            steer.limit(params.maxForce * WEIGHT_BOUNDARIES);\n        }\n        return steer;\n    }\n\n    update(particles: Particle[], width: number, height: number, params: SimulationParams) {\n        let sep = this.separate(particles, params);\n        let wan = this.wander(params);\n        let bnd = this.edges(width, height, params);\n        \n        sep.mult(WEIGHT_SEPARATION);\n        wan.mult(WEIGHT_WANDER);\n        bnd.mult(WEIGHT_BOUNDARIES);\n        \n        this.applyForce(sep);\n        this.applyForce(wan);\n        this.applyForce(bnd);\n        \n        this.vel.add(this.acc);\n        this.vel.limit(params.maxSpeed);\n        this.pos.add(this.vel);\n        this.acc.mult(0);\n    }\n\n    draw(ctx: CanvasRenderingContext2D) {\n        ctx.beginPath();\n        ctx.arc(this.pos.x, this.pos.y, POINT_RADIUS, 0, Math.PI * 2);\n        ctx.fillStyle = POINT_COLOR;\n        ctx.shadowColor = POINT_COLOR;\n        ctx.shadowBlur = 10;\n        ctx.fill();\n        ctx.shadowBlur = 0; // Reset\n        ctx.strokeStyle = 'white';\n        ctx.lineWidth = 1;\n        ctx.stroke();\n    }\n}",
    "// @ts-ignore\nimport shaderCode from '../shaders/solver.wgsl';\nimport { Particle } from './Particle.ts';\n\nexport class SolverGPU {\n    device: GPUDevice;\n    degree: number;\n    pointCount: number;\n    termCount: number;\n    \n    pipeline: GPUComputePipeline | null;\n    bindGroup: GPUBindGroup | null;\n    \n    particleBuffer: GPUBuffer;\n    coeffsBuffer: GPUBuffer;\n    prevCoeffsBuffer: GPUBuffer; \n    paramsBuffer: GPUBuffer;\n    matrixBuffer: GPUBuffer; // New scratch buffer\n    isReady: boolean;\n    \n    constructor(device: GPUDevice, degree: number) {\n        this.device = device;\n        this.degree = degree;\n        this.isReady = false;\n        \n        this.termCount = ((degree + 1) * (degree + 2)) / 2;\n        this.pointCount = this.termCount - 1;\n        \n        this.pipeline = null;\n        this.bindGroup = null;\n        \n        // Particles\n        this.particleBuffer = device.createBuffer({\n            size: this.pointCount * 2 * 4,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST,\n        });\n        \n        // Coeffs (Output)\n        this.coeffsBuffer = device.createBuffer({\n            size: this.termCount * 4,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST, \n        });\n\n        // Prev Coeffs (State)\n        this.prevCoeffsBuffer = device.createBuffer({\n            size: this.termCount * 4,\n            usage: GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_DST, \n        });\n        \n        // Matrix Scratch Buffer (Row-major flattened)\n        // Size: termCount * termCount floats\n        // We actually only need pointCount rows, but square is easier.\n        this.matrixBuffer = device.createBuffer({\n            size: this.termCount * this.termCount * 4,\n            usage: GPUBufferUsage.STORAGE,\n        });\n        \n        // Params\n        this.paramsBuffer = device.createBuffer({\n            size: 4 * 4,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n        \n        this.initPipeline();\n    }\n    \n    async initPipeline() {\n        const shaderModule = this.device.createShaderModule({\n            code: shaderCode\n        });\n        \n        this.pipeline = await this.device.createComputePipelineAsync({\n            layout: 'auto',\n            compute: {\n                module: shaderModule,\n                entryPoint: 'main',\n                constants: {\n                    degree: this.degree,\n                    pointCount: this.pointCount,\n                    termCount: this.termCount\n                }\n            }\n        });\n        \n        this.bindGroup = this.device.createBindGroup({\n            layout: this.pipeline.getBindGroupLayout(0),\n            entries: [\n                { binding: 0, resource: { buffer: this.particleBuffer } },\n                { binding: 1, resource: { buffer: this.coeffsBuffer } },\n                { binding: 2, resource: { buffer: this.paramsBuffer } },\n                { binding: 3, resource: { buffer: this.prevCoeffsBuffer } },\n                { binding: 4, resource: { buffer: this.matrixBuffer } }\n            ]\n        });\n        \n        this.isReady = true;\n    }\n    \n    resize(width: number, height: number, scale: number) {\n        const data = new Float32Array([scale, width, height, 0.0]);\n        this.device.queue.writeBuffer(this.paramsBuffer, 0, data);\n    }\n    \n    solve(particles: Particle[]) {\n        if (!this.pipeline || !this.bindGroup) return;\n        \n        // 1. Upload Particles\n        const data = new Float32Array(this.pointCount * 2);\n        for(let i=0; i<this.pointCount; i++) {\n            data[i*2] = particles[i].pos.x;\n            data[i*2+1] = particles[i].pos.y;\n        }\n        this.device.queue.writeBuffer(this.particleBuffer, 0, data);\n        \n        // 2. Dispatch Compute\n        const encoder = this.device.createCommandEncoder();\n        const pass = encoder.beginComputePass();\n        pass.setPipeline(this.pipeline!);\n        pass.setBindGroup(0, this.bindGroup!);\n        pass.dispatchWorkgroups(1);\n        pass.end();\n        \n        this.device.queue.submit([encoder.finish()]);\n    }\n    \n    getCoeffsBuffer() {\n        return this.coeffsBuffer;\n    }\n    \n    dispose() {\n        this.particleBuffer.destroy();\n        this.coeffsBuffer.destroy();\n        this.prevCoeffsBuffer.destroy();\n        this.paramsBuffer.destroy();\n        this.matrixBuffer.destroy();\n    }\n}\n",
    "import { COLOR_POS, COLOR_NEG, COLOR_LINE } from './Params.ts';\n// @ts-ignore\nimport shaderCode from '../shaders/curve.wgsl';\n\n// Uniform Buffer Offsets (floats)\nconst OFF_COL_POS = 0;\nconst OFF_COL_NEG = 4;\nconst OFF_COL_LINE = 8;\nconst OFF_WIDTH = 12;\nconst OFF_HEIGHT = 13;\nconst OFF_SCALE = 14;\nconst UNIFORM_SIZE = 16 * 4; // 16 floats * 4 bytes = 64 bytes\n\nexport class Renderer {\n    canvas: HTMLCanvasElement;\n    degree: number;\n    adapter: GPUAdapter | null;\n    device: GPUDevice | null;\n    context: GPUCanvasContext | null;\n    pipeline: GPURenderPipeline | null;\n    uniformBuffer: GPUBuffer | null;\n    bindGroup: GPUBindGroup | null;\n    width: number;\n    height: number;\n    scale: number;\n    uniformData: Float32Array;\n    isReady: boolean;\n\n    constructor(canvas: HTMLCanvasElement, degree: number) {\n        this.canvas = canvas;\n        this.degree = degree;\n        \n        this.adapter = null;\n        this.device = null;\n        this.context = null;\n        this.pipeline = null;\n        this.uniformBuffer = null;\n        this.bindGroup = null;\n        \n        this.width = canvas.width;\n        this.height = canvas.height;\n        this.scale = 1;\n        \n        this.uniformData = new Float32Array(UNIFORM_SIZE / 4);\n        \n        this.setUniformColor(OFF_COL_POS, COLOR_POS);\n        this.setUniformColor(OFF_COL_NEG, COLOR_NEG);\n        this.setUniformColor(OFF_COL_LINE, COLOR_LINE);\n        \n        this.isReady = false;\n    }\n\n    setUniformColor(offset: number, colorArray: number[] | Float32Array) {\n        this.uniformData.set(colorArray, offset);\n    }\n\n    async init(sharedDevice?: GPUDevice): Promise<string | null> {\n        if (!navigator.gpu) {\n            return \"WebGPU is not supported.\";\n        }\n\n        if (sharedDevice) {\n            this.device = sharedDevice;\n            this.adapter = null; \n        } else {\n            this.adapter = await navigator.gpu.requestAdapter();\n            if (!this.adapter) return \"No WebGPU adapter found.\";\n            this.device = await this.adapter.requestDevice();\n        }\n\n        this.context = this.canvas.getContext('webgpu') as GPUCanvasContext;\n        if (!this.context) return \"Failed to get WebGPU context\";\n\n        const presentationFormat = navigator.gpu.getPreferredCanvasFormat();\n        this.context.configure({\n            device: this.device,\n            format: presentationFormat,\n            alphaMode: 'premultiplied',\n        });\n\n        this.uniformBuffer = this.device.createBuffer({\n            size: this.uniformData.byteLength,\n            usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST,\n        });\n\n        await this.createPipeline(this.degree);\n        \n        this.isReady = true;\n        return null;\n    }\n\n    async createPipeline(degree: number) {\n        if (!this.device) return;\n        this.degree = degree;\n        // @ts-ignore\n        if (!shaderCode) return;\n\n        const shaderModule = this.device.createShaderModule({\n            label: 'Curve Shader',\n            code: shaderCode\n        });\n\n        const presentationFormat = navigator.gpu.getPreferredCanvasFormat();\n\n        this.pipeline = this.device.createRenderPipeline({\n            layout: 'auto',\n            vertex: {\n                module: shaderModule,\n                entryPoint: 'vs_main',\n            },\n            fragment: {\n                module: shaderModule,\n                entryPoint: 'fs_main',\n                targets: [{ format: presentationFormat }],\n                constants: {\n                    degree: degree,\n                }\n            },\n            primitive: {\n                topology: 'triangle-strip',\n            }\n        });\n    }\n\n    resize(width: number, height: number, scale: number) {\n        this.width = width;\n        this.height = height;\n        this.scale = scale;\n        this.uniformData[OFF_WIDTH] = width;\n        this.uniformData[OFF_HEIGHT] = height;\n        this.uniformData[OFF_SCALE] = scale;\n    }\n\n    dispose() {\n        if (this.uniformBuffer) this.uniformBuffer.destroy();\n    }\n\n    async draw(coeffsBuffer: GPUBuffer) {\n        if (!this.isReady || !this.device || !this.pipeline || !this.context || !this.uniformBuffer) return;\n\n        this.device.pushErrorScope('validation');\n\n        try {\n            this.device.queue.writeBuffer(this.uniformBuffer, 0, this.uniformData as any);\n\n            this.bindGroup = this.device.createBindGroup({\n                layout: this.pipeline!.getBindGroupLayout(0),\n                entries: [\n                    { binding: 0, resource: { buffer: this.uniformBuffer! } },\n                    { binding: 1, resource: { buffer: coeffsBuffer } }\n                ]\n            });\n\n            const commandEncoder = this.device.createCommandEncoder();\n            const textureView = this.context!.getCurrentTexture().createView();\n\n            const renderPassDescriptor: GPURenderPassDescriptor = {\n                colorAttachments: [\n                    {\n                        view: textureView,\n                        clearValue: { r: 0, g: 0, b: 0, a: 0 },\n                        loadOp: 'clear',\n                        storeOp: 'store',\n                    },\n                ],\n            };\n\n            const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\n            passEncoder.setPipeline(this.pipeline!);\n            passEncoder.setBindGroup(0, this.bindGroup);\n            passEncoder.draw(4);\n            passEncoder.end();\n\n            this.device.queue.submit([commandEncoder.finish()]);\n            \n            const error = await this.device.popErrorScope();\n            if (error) {\n                console.error(\"WebGPU Validation Error:\", error.message);\n                this.isReady = false; \n            }\n        } catch (e) {\n            console.error(\"Render Error:\", e);\n            this.isReady = false;\n        }\n    }\n\n    clear() {\n        if (!this.isReady || !this.device || !this.context) return;\n        \n        const commandEncoder = this.device.createCommandEncoder();\n        const textureView = this.context!.getCurrentTexture().createView();\n\n        const renderPassDescriptor: GPURenderPassDescriptor = {\n            colorAttachments: [\n                {\n                    view: textureView,\n                    clearValue: { r: 0, g: 0, b: 0, a: 0 },\n                    loadOp: 'clear',\n                    storeOp: 'store',\n                },\n            ],\n        };\n\n        const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\n        passEncoder.end();\n        this.device.queue.submit([commandEncoder.finish()]);\n    }\n}\n",
    "import { Particle } from './Particle.ts';\nimport { SolverGPU } from './SolverGPU.ts';\nimport { Renderer } from './Renderer.ts';\nimport { createDefaultParams, K_DIST, K_SPEED, K_FORCE, VIEW_SCALE_FACTOR } from './Params.ts';\n\nexport const MIN_DEGREE = 1;\nexport const MAX_DEGREE = 6;\n\nexport class Simulation {\n    glCanvas: HTMLCanvasElement;\n    uiCanvas: HTMLCanvasElement;\n    container: HTMLElement;\n    ctx: CanvasRenderingContext2D;\n    width: number;\n    height: number;\n    particles: Particle[];\n    solver: SolverGPU | null;\n    renderer: Renderer | null;\n    currentDegree: number;\n    pointCount: number;\n    params: any;\n    draggedParticle: Particle | null;\n    needsUpdate: boolean;\n    onDegreeChange: ((d: number) => void) | null;\n    onPauseChange: ((p: boolean) => void) | null;\n    onViewModeChange: ((m: number) => void) | null;\n    \n    // Shared WebGPU Device\n    adapter: GPUAdapter | null;\n    device: GPUDevice | null;\n\n    // Performance\n    lastTime: number;\n    frameCount: number;\n    fps: number;\n    onFpsUpdate: ((fps: number) => void) | null;\n    \n    isChangingDegree: boolean;\n\n    // State\n    isLandscape: boolean;\n\n    constructor(glCanvas: HTMLCanvasElement, uiCanvas: HTMLCanvasElement, container: HTMLElement) {\n        this.glCanvas = glCanvas;\n        this.uiCanvas = uiCanvas;\n        this.container = container;\n        \n        this.ctx = uiCanvas.getContext('2d')!;\n        this.width = uiCanvas.width;\n        this.height = uiCanvas.height;\n        \n        this.particles = [];\n        this.solver = null;\n        this.renderer = null;\n        \n        this.currentDegree = 2; // Default\n        this.pointCount = 0;\n        \n        this.params = createDefaultParams();\n        this.draggedParticle = null;\n        this.needsUpdate = true;\n        this.isChangingDegree = false;\n        \n        this.isLandscape = window.innerWidth > window.innerHeight;\n        \n        this.adapter = null;\n        this.device = null;\n        \n        this.lastTime = performance.now();\n        this.frameCount = 0;\n        this.fps = 0;\n        \n        this.onDegreeChange = null;\n        this.onPauseChange = null;\n        this.onViewModeChange = null;\n        this.onFpsUpdate = null;\n\n        // Start Initialization\n        this.init();\n    }\n\n    async init() {\n        if (!navigator.gpu) {\n            this.showError(\"WebGPU is not supported on this browser.\");\n            return;\n        }\n\n        try {\n            this.adapter = await navigator.gpu.requestAdapter();\n            if (!this.adapter) {\n                this.showError(\"No WebGPU adapter found.\");\n                return;\n            }\n            this.device = await this.adapter.requestDevice();\n        } catch (e) {\n            this.showError(\"Failed to initialize WebGPU: \" + e);\n            return;\n        }\n\n        // Initial Resize to set dimensions before creating solver\n        this.resize();\n\n        // Initial Degree Setup\n        await this.setDegree(2);\n\n        // Start Loop\n        this.animate();\n    }\n\n    showError(msg: string) {\n        console.error(msg);\n        alert(msg); // Simple fallback\n    }\n\n    // ...\n\n    resize() {\n        const logicalWidth = this.container.clientWidth || window.innerWidth;\n        const logicalHeight = this.container.clientHeight || window.innerHeight;\n        const newIsLandscape = logicalWidth > logicalHeight;\n        \n        // Detect orientation change\n        const orientationChanged = newIsLandscape !== this.isLandscape;\n        this.isLandscape = newIsLandscape;\n\n        const dpr = window.devicePixelRatio || 1;\n        \n        // Resize Canvases (Physical Pixels)\n        this.glCanvas.width = logicalWidth * dpr;\n        this.glCanvas.height = logicalHeight * dpr;\n        \n        this.uiCanvas.width = logicalWidth * dpr;\n        this.uiCanvas.height = logicalHeight * dpr;\n        \n        // Logical Dimensions for Physics\n        this.width = logicalWidth;\n        this.height = logicalHeight;\n        \n        // Reset and Scale 2D Context\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n        this.ctx.scale(dpr, dpr);\n\n        this.updatePhysicsParams();\n\n        // If orientation changed, force full rebuild (Hot Swap)\n        // Otherwise just update uniforms\n        if (orientationChanged) {\n            // Re-triggering setDegree will recreate Solver/Renderer with correct dims\n            // We don't await it here because resize is sync, but it will handle the swap.\n            this.setDegree(this.currentDegree);\n        } else {\n            if (this.solver) this.solver.resize(this.width, this.height, this.params.scale);\n            if (this.renderer) {\n                this.renderer.resize(\n                    this.glCanvas.width, \n                    this.glCanvas.height, \n                    this.params.scale * dpr\n                );\n            }\n        }\n        \n        this.needsUpdate = true;\n    }\n\n    updatePhysicsParams() {\n        if (!this.pointCount) return;\n        \n        const areaPerPoint = (this.width * this.height) / this.pointCount;\n        const baseScale = Math.sqrt(areaPerPoint);\n        \n        this.params.minDistance = baseScale * K_DIST;\n        this.params.maxSpeed = baseScale * K_SPEED;\n        this.params.maxForce = this.params.maxSpeed * K_FORCE;\n        this.params.scale = Math.min(this.width, this.height) / VIEW_SCALE_FACTOR;\n    }\n\n    async setDegree(newDegree: number) {\n        if (this.isChangingDegree) return;\n        if (newDegree < MIN_DEGREE || newDegree > MAX_DEGREE) return;\n        \n        this.isChangingDegree = true;\n        \n        const termCount = ((newDegree + 1) * (newDegree + 2)) / 2;\n        const nextPointCount = termCount - 1;\n        \n        if (!this.device) {\n            this.isChangingDegree = false;\n            return;\n        }\n\n        // 1. Create NEW resources in background\n        const nextSolver = new SolverGPU(this.device, newDegree);\n        const nextRenderer = new Renderer(this.glCanvas, newDegree);\n        \n        const error = await nextRenderer.init(this.device);\n        if (error) {\n            this.showError(error);\n            this.isChangingDegree = false;\n            return;\n        }\n\n        // 2. Prepare NEW state\n        nextSolver.resize(this.width, this.height, this.params.scale);\n        nextRenderer.resize(\n            this.glCanvas.width, \n            this.glCanvas.height, \n            this.params.scale * (window.devicePixelRatio || 1)\n        );\n\n        // 3. Prepare NEW particles and Pre-Warm Solver\n        const nextParticles: Particle[] = [];\n        const margin = this.params.minDistance;\n        for (let i = 0; i < nextPointCount; i++) {\n            let x = Math.random() * (this.width - margin * 2) + margin;\n            let y = Math.random() * (this.height - margin * 2) + margin;\n            nextParticles.push(new Particle(x, y));\n        }\n        \n        // Ensure Solver is ready before calling solve\n        // (SolverGPU.initPipeline is async and called in constructor)\n        // We wait for it here if needed\n        while (!nextSolver.isReady) {\n            await new Promise(r => setTimeout(r, 10));\n        }\n        \n        nextSolver.solve(nextParticles);\n\n        // 4. THE SWAP (Atomic)\n        const oldRenderer = this.renderer;\n        const oldSolver = this.solver;\n        \n        this.currentDegree = newDegree;\n        this.pointCount = nextPointCount;\n        this.solver = nextSolver;\n        this.renderer = nextRenderer;\n        this.particles = nextParticles;\n        \n        this.updatePhysicsParams();\n        \n        // 5. Dispose OLD resources safely\n        if (this.device) {\n            await this.device.queue.onSubmittedWorkDone();\n        }\n        \n        if (oldRenderer) oldRenderer.dispose();\n        if (oldSolver) oldSolver.dispose();\n        \n        this.needsUpdate = true;\n        if (this.onDegreeChange) this.onDegreeChange(this.currentDegree);\n        \n        this.isChangingDegree = false;\n    }\n\n    spawnParticles() {\n        this.particles = [];\n        const margin = this.params.minDistance;\n        for (let i = 0; i < this.pointCount; i++) {\n            let x = Math.random() * (this.width - margin * 2) + margin;\n            let y = Math.random() * (this.height - margin * 2) + margin;\n            this.particles.push(new Particle(x, y));\n        }\n        this.needsUpdate = true;\n    }\n\n    togglePause() {\n        this.params.isPaused = !this.params.isPaused;\n        this.needsUpdate = true;\n        if (this.onPauseChange) this.onPauseChange(this.params.isPaused);\n    }\n\n    cycleViewMode() {\n        this.params.viewMode = (this.params.viewMode + 1) % 3;\n        this.needsUpdate = true;\n        if (this.onViewModeChange) this.onViewModeChange(this.params.viewMode);\n    }\n\n    handleInputStart(x: number, y: number): boolean {\n        if (!this.params.isPaused) return false;\n        if (this.params.viewMode === 1) return false;\n\n        const grabRadiusSq = 900;\n\n        for (let p of this.particles) {\n            const dx = p.pos.x - x;\n            const dy = p.pos.y - y;\n            if (dx * dx + dy * dy < grabRadiusSq) {\n                this.draggedParticle = p;\n                return true;\n            }\n        }\n        return false;\n    }\n\n    handleInputMove(x: number, y: number) {\n        if (!this.draggedParticle) return;\n        if (!this.params.isPaused) {\n            this.draggedParticle = null;\n            return;\n        }\n\n        this.draggedParticle.pos.x = x;\n        this.draggedParticle.pos.y = y;\n        this.draggedParticle.vel.set(0, 0);\n        this.needsUpdate = true;\n    }\n\n    handleInputEnd() {\n        this.draggedParticle = null;\n    }\n\n    triggerUpdate() {\n        this.needsUpdate = true;\n    }\n\n    animate() {\n        const now = performance.now();\n        this.frameCount++;\n        if (now - this.lastTime >= 1000) {\n            this.fps = this.frameCount;\n            this.frameCount = 0;\n            this.lastTime = now;\n            if (this.onFpsUpdate) this.onFpsUpdate(this.fps);\n        }\n\n        const shouldRender = !this.params.isPaused || this.needsUpdate;\n\n        if (shouldRender) {\n            if (!this.params.isPaused) {\n                for (let p of this.particles) {\n                    p.update(this.particles, this.width, this.height, this.params);\n                }\n            }\n\n            this.ctx.clearRect(0, 0, this.width, this.height);\n            \n            if (this.params.viewMode === 0 || this.params.viewMode === 2) {\n                for (let p of this.particles) p.draw(this.ctx);\n            }\n\n            let curveDrawn = false;\n            if (this.params.viewMode === 0 || this.params.viewMode === 1) {\n                if (this.solver && this.solver.isReady && this.renderer) {\n                    this.solver.solve(this.particles);\n                    const coeffsBuffer = this.solver.getCoeffsBuffer();\n                    \n                    this.renderer.draw(coeffsBuffer);\n                    if (this.renderer.isReady) curveDrawn = true;\n                }\n            } else {\n                if (this.renderer) {\n                    this.renderer.clear();\n                    if (this.renderer.isReady) curveDrawn = true;\n                }\n            }\n\n            if (this.params.viewMode === 2 || curveDrawn) {\n                this.needsUpdate = false;\n            }\n        }\n\n        requestAnimationFrame(() => this.animate());\n    }\n}",
    "import styles from './css/styles.css';\nimport { Simulation, MIN_DEGREE, MAX_DEGREE } from './engine/Simulation.ts';\n\nconst html = `\n    <style>${styles}</style>\n    <div id=\"ui-container\">\n        <div class=\"row\">\n            <span>Degree:</span>\n            <div class=\"degree-ctrl\">\n                <button id=\"btn-deg-down\" title=\"Arrow Down\">-</button>\n                <span id=\"degree-val\">2</span>\n                <button id=\"btn-deg-up\" title=\"Arrow Up\">+</button>\n            </div>\n        </div>\n        <div class=\"row\">\n            <button id=\"btn-pause\" style=\"flex: 1\" title=\"Space\">Pause</button>\n            <button id=\"btn-restart\" style=\"flex: 1\" title=\"R\">Restart</button>\n            <button id=\"btn-curve\" style=\"flex: 1\" title=\"C\">View: All</button>\n            <button id=\"btn-info\" title=\"F1\">\n                <!-- Inline SVG for Info Icon -->\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"M12 16v-4\"/><path d=\"M12 8h.01\"/></svg>\n            </button>\n        </div>\n    </div>\n    \n    <!-- Info Modal -->\n    <div id=\"info-modal\">\n        <div class=\"modal-content\">\n            <button id=\"btn-close-modal\">&times;</button>\n            <h2>Dynamic Polynomials</h2>\n            \n            <h3>What is this?</h3>\n            <p>A visualization of high-degree algebraic curves (<em>f(x,y) = 0</em>).</p>\n\n            <h3>Why the points?</h3>\n            <p>Random equations usually produce empty screens. By forcing the curve to pass through these moving points, we guarantee interesting, visible shapes.</p>\n\n            <h3>How to play:</h3>\n            <ul>\n                <li><strong>Watch</strong> the swarm evolve the shape.</li>\n                <li><strong>Pause (Space)</strong> to drag points manually.</li>\n                <li><strong>Change Degree</strong> to see complex loops (deg 3+).</li>\n            </ul>\n\n            <div class=\"modal-actions\">\n                <a href=\"https://github.com/aviRon012/dynamic-algebraic-curve\" target=\"_blank\">\n                    <button class=\"btn-primary\" style=\"display: flex; align-items: center; gap: 8px;\">\n                        <!-- Inline SVG for GitHub Icon -->\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4\"/><path d=\"M9 18c-4.51 2-5-2-7-2\"/></svg>\n                        View Code on GitHub\n                    </button>\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <!-- FPS Counter -->\n    <div id=\"fps-counter\" style=\"position: absolute; top: 10px; left: 10px; color: #5eead4; font-family: monospace; font-weight: bold; background: rgba(0,0,0,0.5); padding: 4px 8px; border-radius: 4px; pointer-events: none; z-index: 20;\">FPS: --</div>\n\n    <canvas id=\"glCanvas\"></canvas>\n    <canvas id=\"uiCanvas\"></canvas>\n`;\n\nfunction initApp() {\n    const container = document.getElementById('app-container');\n    if (!container) return;\n\n    container.innerHTML = html;\n\n    // We can't use Shadow DOM queries anymore, just standard DOM\n    const $ = (id: string) => document.getElementById(id);\n    const glCanvas = $('glCanvas') as HTMLCanvasElement;\n    const uiCanvas = $('uiCanvas') as HTMLCanvasElement;\n\n    if (!glCanvas || !uiCanvas) return;\n\n    const simulation = new Simulation(glCanvas, uiCanvas, container);\n\n    // Bind Events\n    const updateUI = () => {\n        const d = simulation.currentDegree;\n        const btnDown = $('btn-deg-down') as HTMLButtonElement;\n        const btnUp = $('btn-deg-up') as HTMLButtonElement;\n        const degVal = $('degree-val');\n        const btnPause = $('btn-pause');\n        const btnCurve = $('btn-curve');\n\n        if(degVal) degVal.textContent = d.toString();\n        if(btnDown) btnDown.disabled = (d <= MIN_DEGREE);\n        if(btnUp) btnUp.disabled = (d >= MAX_DEGREE);\n        if(btnPause) btnPause.textContent = simulation.params.isPaused ? 'Resume' : 'Pause';\n        \n        const labels = ['View: All', 'View: Curve', 'View: Points'];\n        if(btnCurve) btnCurve.textContent = labels[simulation.params.viewMode];\n    };\n\n    simulation.onDegreeChange = updateUI;\n    simulation.onPauseChange = updateUI;\n    simulation.onViewModeChange = updateUI;\n    simulation.onFpsUpdate = (fps) => {\n        const div = $('fps-counter');\n        if (div) div.textContent = `FPS: ${fps}`;\n    };\n\n    // Initial UI Update\n    updateUI();\n\n    // Buttons\n    $('btn-deg-up')!.onclick = () => simulation.setDegree(simulation.currentDegree + 1);\n    $('btn-deg-down')!.onclick = () => simulation.setDegree(simulation.currentDegree - 1);\n    $('btn-restart')!.onclick = () => simulation.spawnParticles();\n    $('btn-pause')!.onclick = () => simulation.togglePause();\n    $('btn-curve')!.onclick = () => simulation.cycleViewMode();\n\n    // Modal\n    const modal = $('info-modal')!;\n    $('btn-info')!.onclick = () => modal.classList.add('visible');\n    $('btn-close-modal')!.onclick = () => modal.classList.remove('visible');\n    modal.onclick = (e) => { if (e.target === modal) modal.classList.remove('visible'); };\n\n    // Interaction\n    let touchOffset = 0;\n    let idleTimer: any = null;\n\n    const handleDragStart = (clientX: number, clientY: number) => {\n        const rect = uiCanvas.getBoundingClientRect();\n        const x = clientX - rect.left;\n        const y = clientY - rect.top;\n        simulation.handleInputStart(x, y);\n    };\n\n    const handleDragMove = (clientX: number, clientY: number) => {\n        const rect = uiCanvas.getBoundingClientRect();\n        const x = clientX - rect.left;\n        const y = clientY - rect.top + touchOffset;\n        simulation.handleInputMove(x, y);\n    };\n\n    // Mouse\n    uiCanvas.addEventListener('mousedown', (e) => {\n        touchOffset = 0;\n        handleDragStart(e.clientX, e.clientY);\n    });\n    window.addEventListener('mousemove', (e) => handleDragMove(e.clientX, e.clientY));\n    window.addEventListener('mouseup', () => simulation.handleInputEnd());\n\n    // Touch\n    uiCanvas.addEventListener('touchstart', (e) => {\n        e.preventDefault();\n        touchOffset = -60; // Offset for visibility under finger\n        handleDragStart(e.touches[0].clientX, e.touches[0].clientY);\n    }, { passive: false });\n    \n    uiCanvas.addEventListener('touchmove', (e) => {\n        e.preventDefault();\n        handleDragMove(e.touches[0].clientX, e.touches[0].clientY);\n    }, { passive: false });\n    \n    uiCanvas.addEventListener('touchend', () => simulation.handleInputEnd());\n\n    // Idle Timer\n    const resetIdle = () => {\n        const ui = $('ui-container');\n        if (!ui) return;\n        \n        ui.classList.remove('hidden');\n        document.body.style.cursor = 'default';\n        if (idleTimer) clearTimeout(idleTimer);\n        \n        idleTimer = setTimeout(() => {\n            if (modal.classList.contains('visible')) {\n                resetIdle();\n                return;\n            }\n            ui.classList.add('hidden');\n            document.body.style.cursor = 'none';\n        }, 3000);\n    };\n\n    resetIdle();\n    uiCanvas.addEventListener('mousemove', resetIdle);\n    uiCanvas.addEventListener('mousedown', resetIdle);\n    uiCanvas.addEventListener('touchstart', resetIdle);\n\n    // Keyboard\n    window.addEventListener('keydown', (e) => {\n        if (e.key === 'F1') { e.preventDefault(); modal.classList.add('visible'); }\n        if (e.key === 'Escape') { modal.classList.remove('visible'); }\n        if (e.key === ' ') { e.preventDefault(); simulation.togglePause(); }\n        if (e.key === 'r' || e.key === 'R') simulation.spawnParticles();\n        if (e.key === 'c' || e.key === 'C') simulation.cycleViewMode();\n        if (e.key === 'ArrowUp') { e.preventDefault(); simulation.setDegree(simulation.currentDegree + 1); }\n        if (e.key === 'ArrowDown') { e.preventDefault(); simulation.setDegree(simulation.currentDegree - 1); }\n        resetIdle();\n    });\n\n    // Handle Resize specifically for the container setup\n    const resizeObserver = new ResizeObserver(() => {\n        simulation.resize();\n        resetIdle(); // Show UI on rotation/resize\n    });\n    resizeObserver.observe(container);\n}\n\n// Start\ninitApp();\n"
  ],
  "mappings": "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",
  "debugId": "E4B2578009B1022364756E2164756E21",
  "names": []
}